---
outline: [2,3]
---
# é…ç½®è¯´æ˜

## ğŸ“‚ é…ç½®æ–‡ä»¶ç»“æ„

å¾®åº”ç”¨é¡¹ç›®åŒ…å«ä¸¤ä¸ªä¸»è¦é…ç½®æ–‡ä»¶ï¼š

```txt
config/
â”œâ”€â”€ app.config.js        # åº”ç”¨ä¸»é…ç½®æ–‡ä»¶
â””â”€â”€ components.config.js # ç»„ä»¶æ³¨å†Œé…ç½®æ–‡ä»¶
```

## âš™ï¸ åº”ç”¨é…ç½® (app.config.js) {#app_config}

åº”ç”¨ä¸»é…ç½®æ–‡ä»¶å®šä¹‰äº†å¾®åº”ç”¨çš„åŸºç¡€ä¿¡æ¯ã€æƒé™æ§åˆ¶å’Œå›½é™…åŒ–æ”¯æŒã€‚

### å®Œæ•´é…ç½®ç¤ºä¾‹

```javascript
export default {
  // åº”ç”¨åŸºç¡€ä¿¡æ¯
  author: 'hslr',                          // ä½œè€…æ ‡è¯†
  microAppId: 'hslr-weather',    // åº”ç”¨å”¯ä¸€æ ‡è¯†
  version: '1.0.0',                        // ç‰ˆæœ¬å·
  entry: 'main.js',                        // å…¥å£æ–‡ä»¶
  icon: 'logo.png',                        // åº”ç”¨å›¾æ ‡

  // åº”ç”¨å›½é™…åŒ–ä¿¡æ¯
  appInfo: {
    'zh-CN': {
      appName: 'å¤©æ°”',
      description: 'å¯ä»¥æŸ¥çœ‹å…¨çƒå„åœ°çš„å¤©æ°”',
      networkDescription: 'é¦–æ¬¡è¿è¡Œï¼Œéœ€(å‘ xxx.weather.com)ä¸‹è½½åŸå¸‚åˆ—è¡¨æ•°æ®'
    },
    'en-US': {
      appName: 'Weather',
      description: 'å¯ä»¥æŸ¥çœ‹å…¨çƒå„åœ°çš„å¤©æ°”',
      networkDescription: 'For the first time, you need to download city list data(from xxx.weather.com)'
    }
  },

  // æƒé™é…ç½®
  permissions: [
    'network',     // ç½‘ç»œæƒé™
    'dataNode'     // æ•°æ®èŠ‚ç‚¹æƒé™
  ],

  // ç½‘ç»œåŸŸåç™½åå•
  networkDomains: [
    'example.weather.com'
  ],

  // æ•°æ®èŠ‚ç‚¹é…ç½®
  dataNodes: {
    config: {
      scope: 'app', // Appçº§åˆ«-æ‰€æœ‰ç”¨æˆ·å¯è¯»ï¼Œç®¡ç†å‘˜å¯å†™
      isPublic: true // æ˜¯å¦å…è®¸å…¬å¼€æ¨¡å¼è¯»å–
    },
    weatherData: {
      scope: 'app',
      isPublic: true
    },
    note: {
      scope: 'user',// ç”¨æˆ·çº§åˆ«-å¤šè´¦å·æ•°æ®éš”ç¦»ï¼Œä»…å½“å‰ç”¨æˆ·å¯è¯»å†™
      isPublic: false 
    }
  }
};
```

### åŸºç¡€é…ç½®å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | ç¤ºä¾‹å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| `author` | string | âœ… | hslr | ä½œè€…æ ‡è¯†ï¼Œç”¨äºç”Ÿæˆç»„ä»¶æ ‡ç­¾åå‰ç¼€ï¼Œå¤§äºä¸‰ä¸ªå­—ç¬¦ï¼Œ**ä¸å«â€-â€œä»¥å¤–çš„ç‰¹æ®Šç¬¦å·** |
| `microAppId` | string | âœ… | `hslr-weather` | åº”ç”¨å”¯ä¸€æ ‡è¯†ï¼Œæ ¼å¼éœ€ä½¿ç”¨ `ä½œè€…-åº”ç”¨å` æ ¼å¼ï¼Œ**ä¸å«â€-â€œä»¥å¤–çš„ç‰¹æ®Šç¬¦å·** |
| `version` | string | âœ… | 1.0.0 | ç‰ˆæœ¬å·ï¼Œéµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ |
| `entry` | string | âœ… | `'main.js'` | å…¥å£æ–‡ä»¶è·¯å¾„ |
| `icon` | string | âœ… | `icon.png` | åº”ç”¨å›¾æ ‡æ–‡ä»¶åï¼ˆä½äº public ç›®å½•ï¼‰ |

### åº”ç”¨ä¿¡æ¯é…ç½® ï¼ˆappInfoï¼‰

åº”ç”¨æ”¯æŒå¤šè¯­è¨€é…ç½®ï¼Œè‡³å°‘éœ€è¦é…ç½®ä¸€ç§è¯­è¨€ã€‚è¯­è¨€æ ‡è¯†ç¬¦éµå¾ª [IETF BCP 47](https://www.rfc-editor.org/info/bcp47) æ ‡å‡†ï¼Œå¸¸ç”¨çš„é…ç½®åŒ…æ‹¬ï¼š

- `zh-CN` - ç®€ä½“ä¸­æ–‡ï¼ˆä¸­å›½å¤§é™†ï¼‰
- `en-US` - è‹±è¯­ï¼ˆç¾å›½ï¼‰
- `zh-TW` - ç¹ä½“ä¸­æ–‡ï¼ˆå°æ¹¾ï¼‰
- `ja-JP` - æ—¥è¯­ï¼ˆæ—¥æœ¬ï¼‰
- `ko-KR` - éŸ©è¯­ï¼ˆéŸ©å›½ï¼‰
- `es-ES` - è¥¿ç­ç‰™è¯­ï¼ˆè¥¿ç­ç‰™ï¼‰
<!-- - `fr-FR` - æ³•è¯­ï¼ˆæ³•å›½ï¼‰
- `de-DE` - å¾·è¯­ï¼ˆå¾·å›½ï¼‰
- `ru-RU` - ä¿„è¯­ï¼ˆä¿„ç½—æ–¯ï¼‰
- `pt-BR` - è‘¡è„ç‰™è¯­ï¼ˆå·´è¥¿ï¼‰
- `it-IT` - æ„å¤§åˆ©è¯­ï¼ˆæ„å¤§åˆ©ï¼‰
- `ar-SA` - é˜¿æ‹‰ä¼¯è¯­ï¼ˆæ²™ç‰¹é˜¿æ‹‰ä¼¯ï¼‰ -->

<!-- **è¯­è¨€ä»£ç å‚è€ƒèµ„æºï¼š**
- [ISO 639-1 ä¸¤å­—æ¯è¯­è¨€ä»£ç å®Œæ•´åˆ—è¡¨](https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes)
- [IANA Language Subtag Registry](https://www.iana.org/assignments/language-subtag-registry)ï¼ˆå®˜æ–¹æƒå¨æºï¼‰
- [BCP 47 Language Tags Generator](https://r12a.github.io/app-subtags/)ï¼ˆåœ¨çº¿å·¥å…·ï¼‰ -->

```javascript
appInfo: {
  'zh-CN': {
    appName: 'å¤©æ°”',
    description: 'æŸ¥çœ‹å„åœ°å¤©æ°”æ•°æ®',
    networkDescription: 'é¦–æ¬¡å®‰è£…åä¸‹è½½å¿…è¦çš„é…ç½®æ•°æ®'
  },
  'en-US': {
    appName: 'App Name',
    description: 'App Description',
    networkDescription: 'Network Description'
  }
}
```

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| `appName` | string | âœ… | åº”ç”¨æ˜¾ç¤ºåç§° |
| `description` | string | âœ… | åº”ç”¨åŠŸèƒ½æè¿° |
| `networkDescription` | string | - | ç½‘ç»œæƒé™è¯´æ˜ï¼Œæœªä½¿ç”¨ç½‘ç»œæƒé™å¯å¿½ç•¥ |

### æƒé™é…ç½®
è¯·åŠ¡å¿…å‡†ç¡®å£°æ˜ï¼Œå¦åˆ™å¯èƒ½ä¸èƒ½ä½¿ç”¨ç›¸å…³APIèƒ½åŠ›å’Œæ³¨å†Œï¼Œæ›´å¤šæƒé™è¯´æ˜å‚é˜… [æƒé™å£°æ˜](./permission)

```javascript
permissions: [
  'network',     // ç½‘ç»œæƒé™
  'dataNode'     // æ•°æ®èŠ‚ç‚¹æƒé™
]
```



### ç½‘ç»œé…ç½®

```javascript
networkDomains: [
  'api.example.com',
  'github.com'
]
```

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `networkDomains` | string[] | ç½‘ç»œè¯·æ±‚ç™½åå•åŸŸååˆ—è¡¨ |

### æ•°æ®èŠ‚ç‚¹é…ç½® (dataNodes)
å…·ä½“çš„è¯´æ˜ä»¥åŠæƒé™å¯å‚é˜… [æ•°æ®èŠ‚ç‚¹è¯´æ˜](./data_node)
```javascript
// æ•°æ®èŠ‚ç‚¹é…ç½®
dataNodes: {
  config: {
    scope: 'app', // Appçº§åˆ«-æ‰€æœ‰ç”¨æˆ·å¯è¯»ï¼Œç®¡ç†å‘˜å¯å†™
    isPublic: true // æ˜¯å¦å…è®¸å…¬å¼€æ¨¡å¼è¯»å–
  },
  weatherData: {
    scope: 'app',
    isPublic: true
  },
  note: {
    scope: 'user',// ç”¨æˆ·çº§åˆ«-å¤šè´¦å·æ•°æ®éš”ç¦»ï¼Œä»…å½“å‰ç”¨æˆ·å¯è¯»å†™
    isPublic: false 
  }
}
```

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `dataNodes` | object | æ•°æ®èŠ‚ç‚¹é…ç½®å¯¹è±¡ï¼Œé”®ä¸ºèŠ‚ç‚¹æ ‡è¯† |

#### æ•°æ®èŠ‚ç‚¹å†…éƒ¨å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| `scope` | string | âœ… | æ•°æ®ä½œç”¨åŸŸï¼Œå¯é€‰å€¼ï¼š`'app'`ï¼ˆåº”ç”¨çº§åˆ«ï¼‰æˆ– `'user'`ï¼ˆç”¨æˆ·çº§åˆ«ï¼‰ |
| `isPublic` | boolean | âœ… | æ˜¯å¦å…è®¸åœ¨å…¬å¼€æ¨¡å¼ä¸‹è¯»å–ï¼Œ`true`è¡¨ç¤ºå…¬å¼€å¯è¯»ï¼Œ`false`è¡¨ç¤ºä»…ç™»å½•ç”¨æˆ·å¯è¯» |



## ğŸ§© ç»„ä»¶é…ç½® (components.config.js)

ç»„ä»¶é…ç½®æ–‡ä»¶ç”¨äºæ³¨å†Œé¡µé¢å’Œå°éƒ¨ä»¶ç»„ä»¶ã€‚æ¯ä¸ªå¾®åº”ç”¨å»ºè®®æœ€å¤šåŒ…å«3ä¸ªå°éƒ¨ä»¶ç»„ä»¶ã€å°éƒ¨ä»¶é…ç½®ç»„ä»¶ã€ä¸»é¡µé¢ç»„ä»¶ï¼ˆæš‚æœªæœ‰å…¥å£æ‰“å¼€ï¼Œå¯ä»¥ä»å°éƒ¨ä»¶æ‰“å¼€ï¼‰ã€‚å¯ä»¥å•ç‹¬æœ‰ä¸€ä¸ªå°éƒ¨ä»¶ç»„ä»¶ï¼Œä¹Ÿå¯ä»¥æœ‰ä¸€ä¸ªç‹¬ç«‹ä¸»é¡µé¢ç»„ä»¶ï¼Œéå¼ºåˆ¶è¦æ±‚é½å…¨ï¼Œå’Œç»„ä»¶æ•°é‡ï¼Œä½†æ˜¯ä¸å¯å°†å¤šç§æ— å…³ç±»å‹çš„åŠŸèƒ½æ”¾åœ¨åŒä¸€ä¸ªå¾®åº”ç”¨å†…ã€‚

### å®Œæ•´é…ç½®ç¤ºä¾‹

```javascript
import HelloWorldConfig from '../src/components/widgetConfig.js';
import HelloWorldWidget from '../src/components/widget.js';

export default {
  // é¡µé¢æ³¨å†Œ
  pages: {
    'hello-world-config': {
      component: HelloWorldConfig,        // é…ç½®é¡µé¢ç»„ä»¶
      background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',  // æ¸å˜èƒŒæ™¯
      headerTextColor: '#ffffff'          // ç™½è‰²æ–‡å­—
    }
  },

  // å°éƒ¨ä»¶ï¼ˆå¡ç‰‡ï¼‰æ³¨å†Œ
  widgets: {
    'hello-world-widget': {
      component: HelloWorldWidget,           // å°éƒ¨ä»¶ç»„ä»¶
      configComponentName: 'hello-world-config', // é…ç½®é¡µé¢åç§°
      size: ['1x1', '1x2', '1xfull', '2x1', '2x2', '2x4'], // æ”¯æŒçš„å°ºå¯¸
      background: '',                        // é»˜è®¤èƒŒæ™¯é¢œè‰²
    },
  },
};
```

### é¡µé¢é…ç½®

```javascript
pages: {
  'page-name': {
    component: PageComponent,        // é¡µé¢ç»„ä»¶ç±»
    background: '#000',  // èƒŒæ™¯æ ·å¼
    headerTextColor: '#1890ff'          // å¤´éƒ¨æ–‡å­—é¢œè‰²
    main:false // æ˜¯å¦ä¸ºä¸»é¡µé¢
  }
}
```

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| `component` | class | âœ… | é¡µé¢ç»„ä»¶ç±» |
| `main` | boolean | âŒ | æ˜¯å¦ä¸ºä¸»é¡µé¢ï¼Œé¦–ä¸ªå¼€å‘ç‰ˆæš‚ä¸å…¼å®¹ï¼ŒåæœŸé¡¹ç›®ä¼šå¢åŠ ç›¸å…³åº”ç”¨åˆ—è¡¨å…¥å£ï¼Œç‚¹å‡»ç›´æ¥æ‰“å¼€ |
| `background` | string | âŒ | èƒŒæ™¯æ ·å¼ï¼ˆCSS background å±æ€§ï¼‰ |
| `headerTextColor` | string | âŒ | å¤´éƒ¨æ–‡å­—é¢œè‰²ï¼ˆCSS color å€¼ï¼‰ |

### å°éƒ¨ä»¶é…ç½®

```javascript
widgets: {
  'widget-name': {
    component: WidgetComponent,           // å°éƒ¨ä»¶ç»„ä»¶ç±»
    configComponentName: 'config-page',   // å¯¹åº”é…ç½®é¡µé¢åç§°
    size: ['1x1', '2x2'],                 // æ”¯æŒçš„å°ºå¯¸
    background: '',                       // é»˜è®¤èƒŒæ™¯é¢œè‰²
    isModifyBackground: false,            // æ˜¯å¦å…è®¸ä¿®æ”¹èƒŒæ™¯
  }
}
```

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| `component` | class | âœ… | å°éƒ¨ä»¶ç»„ä»¶ç±» |
| `configComponentName` | string | âœ… | å¯¹åº”çš„é…ç½®é¡µé¢åç§° |
| `size` | string[] | âœ… | æ”¯æŒçš„ç½‘æ ¼å°ºå¯¸ |
| `background` | string | âŒ | é»˜è®¤èƒŒæ™¯é¢œè‰² |

### æ”¯æŒçš„ç½‘æ ¼å°ºå¯¸

| å°ºå¯¸ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| `1x1` | 1æ ¼Ã—1æ ¼ | é«˜xå®½ |
| `1x2` | 1æ ¼Ã—2æ ¼ | é«˜xå®½ |
| `2x1` | 2æ ¼Ã—1æ ¼ | é«˜xå®½ |
| `2x2` | 2æ ¼Ã—2æ ¼ | é«˜xå®½ |
| `2x4` | 2æ ¼Ã—4æ ¼ | é«˜xå®½ |
| `1xfull` | 1æ ¼Ã—å…¨å±å®½ | å…¨å±å®½åº¦å±•ç¤º |



## ğŸ”„ é…ç½®ç”Ÿæˆæµç¨‹

1. **å¼€å‘æ¨¡å¼**ï¼šè¿è¡Œ `npm run dev` æˆ– `npm run gen:dev`
   - è‡ªåŠ¨æ·»åŠ  `-dev` åç¼€åˆ° `microAppId`
   - ç”Ÿæˆå¸¦å¼€å‘æ ‡è¯†çš„é…ç½®

2. **ç”Ÿäº§æ¨¡å¼**ï¼šè¿è¡Œ `npm run build` æˆ– `npm run gen`
   - ä½¿ç”¨åŸå§‹ `microAppId`
   - ç”Ÿæˆæ­£å¼ç‰ˆæœ¬é…ç½®

3. **é…ç½®æ–‡ä»¶ç”Ÿæˆ**ï¼šç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆ `app.json` æ–‡ä»¶
   - åŒ…å«å®Œæ•´çš„åº”ç”¨é…ç½®ä¿¡æ¯
   - ç”¨äºä¸»å¹³å°è¯†åˆ«å’ŒåŠ è½½å¾®åº”ç”¨

## ğŸ“‹ é…ç½®æœ€ä½³å®è·µ

### å‘½åè§„èŒƒ
- `microAppId`ï¼šä½¿ç”¨ `ä½œè€…-åŠŸèƒ½` æ ¼å¼
- é¡µé¢åç§°ï¼šä½¿ç”¨å°å†™å­—æ¯å’Œè¿å­—ç¬¦ï¼Œå¦‚ `weather-config`
- å°éƒ¨ä»¶åç§°ï¼šä½¿ç”¨å°å†™å­—æ¯å’Œè¿å­—ç¬¦ï¼Œå¦‚ `weather-widget`

### æƒé™æ§åˆ¶
- ä»…ç”³è¯·å¿…è¦çš„æƒé™
- ç½‘ç»œæƒé™éœ€æ˜ç¡®æŒ‡å®šåŸŸåç™½åå•

### å›½é™…åŒ–æ”¯æŒ
- è‡³å°‘æä¾›ä¸€é¡¹è¯­è¨€é…ç½®
- æè¿°ä¿¡æ¯è¦å‡†ç¡®åæ˜ åº”ç”¨åŠŸèƒ½
- ç½‘ç»œæè¿°è¦è¯´æ˜æ•°æ®æµå‘

### ç»„ä»¶è®¾è®¡
- åˆç†é€‰æ‹©æ”¯æŒçš„ç½‘æ ¼å°ºå¯¸
- èƒŒæ™¯é…ç½®è¦æ¨èæ·±è‰²æ¨¡å¼é€‚é…
- é…ç½®é¡µé¢è¦ä¸å°éƒ¨ä»¶åŠŸèƒ½å¯¹åº”